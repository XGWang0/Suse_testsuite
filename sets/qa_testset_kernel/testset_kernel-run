#! /bin/bash

# Install the test suites packages

/usr/share/qa/qa_testset_kernel/install.sh

echo -e "You can run acceptance/kernel/regression tests now.\n"

#start all tests

echo -e "\nBEWARE: ALL TESTS are running, Please see screen -r tests\n" > /etc/motd

echo -e "All tests starts now, see screen -r tests for details\n"

echo -e "========== Starting Testing ==========\n"

kernel_run=`awk '{print $2}' kernel_test_packages`
regression_run=`awk '{print $2}' regression_test_packages`

export kernel_run regression_run

screen -L -S tests -m /bin/bash -c '(
	i=1
	for test_name in $kernel_run $regression_run;do
		echo -e "========================================= Testing ${test_name} [$i] ======================================\n"
		run_path=`grep $test_run *test_packages | awk '{print $3}'`
		/bin/bash $run_path/$test_name
		let i=i+1
	done
	)'


