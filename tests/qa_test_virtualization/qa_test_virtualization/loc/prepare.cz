#!/bin/bash

MOUNT_DIR="/MOUNT-VIRT"
MOUNT_DIR2="/MOUNT-VIRT2"

if [ -e $MOUNT_DIR -a "`ls $MOUNT_DIR 2>/dev/null | wc -l`" -gt 0 ] ||  [ -e $MOUNT_DIR2 -a "`ls $MOUNT_DIR2 2>/dev/null | wc -l`" -gt 0 ] ; then
	echo "Error: Directory $MOUNT_DIR or $MOUNT_DIR2 already exist and is nonempty. Terminating..."
	exit 11
fi

getSettings="../../virtautolib/lib/get-settings.sh"
MOUNT1=`$getSettings MOUNT1.addr`
MOUNT2=`$getSettings MOUNT2.addr`

mkdir -p $MOUNT_DIR && mount -t nfs -oro $MOUNT1:/srv/dist $MOUNT_DIR
mkdir -p $MOUNT_DIR2 && mount -t nfs -oro $MOUNT2:/storage $MOUNT_DIR2

